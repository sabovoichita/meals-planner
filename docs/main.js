(()=>{var e,t,n={},o={};function a(e){var t=o[e];if(void 0!==t)return t.exports;var r=o[e]={id:e,exports:{}};return n[e](r,r.exports,a),r.exports}let r;a.m=n,a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.f={},a.e=e=>Promise.all(Object.keys(a.f).reduce(((t,n)=>(a.f[n](e,t),t)),[])),a.u=e=>e+".main.js",a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e={},t="mymeals:",a.l=(n,o,r,d)=>{if(e[n])e[n].push(o);else{var s,i;if(void 0!==r)for(var l=document.getElementsByTagName("script"),c=0;c<l.length;c++){var u=l[c];if(u.getAttribute("src")==n||u.getAttribute("data-webpack")==t+r){s=u;break}}s||(i=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,a.nc&&s.setAttribute("nonce",a.nc),s.setAttribute("data-webpack",t+r),s.src=n),e[n]=[o];var m=(t,o)=>{s.onerror=s.onload=null,clearTimeout(p);var a=e[n];if(delete e[n],s.parentNode&&s.parentNode.removeChild(s),a&&a.forEach((e=>e(o))),t)return t(o)},p=setTimeout(m.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=m.bind(null,s.onerror),s.onload=m.bind(null,s.onload),i&&document.head.appendChild(s)}},a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.p="",(()=>{var e={792:0};a.f.j=(t,n)=>{var o=a.o(e,t)?e[t]:void 0;if(0!==o)if(o)n.push(o[2]);else{var r=new Promise(((n,a)=>o=e[t]=[n,a]));n.push(o[2]=r);var d=a.p+a.u(t),s=new Error;a.l(d,(n=>{if(a.o(e,t)&&(0!==(o=e[t])&&(e[t]=void 0),o)){var r=n&&("load"===n.type?"missing":n.type),d=n&&n.target&&n.target.src;s.message="Loading chunk "+t+" failed.\n("+r+": "+d+")",s.name="ChunkLoadError",s.type=r,s.request=d,o[1](s)}}),"chunk-"+t,t)}};var t=(t,n)=>{var o,r,[d,s,i]=n,l=0;if(d.some((t=>0!==e[t]))){for(o in s)a.o(s,o)&&(a.m[o]=s[o]);i&&i(a)}for(t&&t(n);l<d.length;l++)r=d[l],a.o(e,r)&&e[r]&&e[r][0](),e[r]=0},n=self.webpackChunkmymeals=self.webpackChunkmymeals||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),a.nc=void 0,a.e(511).then(a.bind(a,511));let d=[];function s(e){return document.querySelector(e)}function i(e){return`<tr>\n  <td>\n  <button type = "button" data-id="${e.id}" class = "action-btn edit-btn">&#9998;</button>\n  <button type = "button" data-id="${e.id}" class = "action-btn delete-btn">♻</button>\n  ${e.order}</td>\n  <td>${e.date}</td>\n  <td>${e.food}</td>\n  <td>${e.symptom}</td>\n  <td>${e.avoid}</td>\n  <td><span class="plus">&#43;</span>\n </td>\n</tr>`}let l=[];function c(e){if(function(e,t){return e===t?(console.info("same array"),!0):!(e.length!==t.length||!e.every(((e,n)=>e===t[n])))&&(console.info("same content in arrays"),!0)}(l,e))return;console.time("render");const t=e.map(i);s("#mealsTable tbody").innerHTML=t.join(""),console.timeEnd("render")}const u=()=>{const e=document.querySelector(".progress__scroll"),t=document.documentElement.scrollTop,n=document.documentElement.scrollHeight-document.documentElement.clientHeight,o=Math.round(100*t/n);e.style.display=t>100?"flex":"none",e.addEventListener("click",(()=>{document.documentElement.scrollTop=0})),e.style.background=`conic-gradient(#008000 ${o}%, #ffffff ${o}%)`};window.onload=function(){const e=document.querySelector("footer"),t=document.createElement("a");t.href="https://github.com/sabovoichita/myMeals",t.target="_blank",t.textContent="⚙Source Code",t.style.color="white",e.appendChild(t)}(),window.onscroll=u,window.onload=u,s("#search").addEventListener("input",(e=>{const t=e.target.value,n=function(e,t){return t=t.toLowerCase(),e.filter((e=>e.date.toLowerCase().includes(t)||e.food.toLowerCase().includes(t)||e.symptom.toLowerCase().includes(t)||e.avoid.toLowerCase().includes(t)))}(d,t);c(n)})),s("#mealsForm").addEventListener("submit",(function(e){e.preventDefault();const t={order:s("input[name=order]").value,date:s("input[name=date]").value,food:s("input[id=food]").value,symptom:s("#symptom").value,avoid:s("#avoid").value};r?(t.id=r,console.warn("should we edit?",r,t),function(e){return fetch("http://localhost:3000/meals-json/update",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((e=>e.json()))}(t).then((e=>{e.success&&window.location.reload()}))):function(e){return fetch("http://localhost:3000/meals-json/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((e=>e.json()))}(t).then((e=>{e.success&&(t.id=e.id,d=d.map((e=>e)),d.push(t),c(d),s("#mealsForm").reset())}))})),s("#mealsForm").addEventListener("reset",(()=>{console.warn("reset",r),r=void 0})),document.querySelectorAll("#mealsTable th span").forEach((e=>{e.addEventListener("click",(()=>{const t=e.dataset.sortBy,n="asc"===e.dataset.sortOrder?"desc":"asc";e.dataset.sortOrder=n;const o=function(e,t,n){const o=e.slice();return o.sort(((e,o)=>"asc"===n?e[t]>o[t]?1:-1:e[t]<o[t]?1:-1)),o}(d,t,n);c(o)}))})),s("#mealsTable tbody").addEventListener("click",(e=>{if(e.target.matches("button.delete-btn")){const t=e.target.dataset.id;(function(e){return fetch("http://localhost:3000/meals-json/delete",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e})}).then((e=>e.json()))})(t).then((e=>{e.success&&(d=d.filter((e=>e.id!==t)),c(d))}))}else e.target.matches("button.edit-btn")&&function(e){r=e;const t=d.find((t=>t.id===e));console.warn("edit",e,t),function(e){s("input[name=order]").value=e.order,s("input[name=date]").value=e.date,s("input[name=food").value=e.food,s("input[name=symptom]").value=e.symptom,s("input[name=avoid]").value=e.avoid}(t)}(e.target.dataset.id)})),fetch("http://localhost:3000/meals-json",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{d=e,c(e),console.timeEnd("app-ready")}))})();